package org.zerock.myapp;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.URL;

import lombok.Cleanup;
import lombok.extern.log4j.Log4j2;

@Log4j2
public class URLExample {

	public static void main(String[] args) throws IOException {
		
		String urlString = "https://www.google.co.kr";
		URL url = new URL(urlString);
		log.info("1. url: {}, type:{} ", url, url.getClass().getName());
		
//		===URL 객체를 통해서 지정된 주소에 대한 다양한 정보 획득 가능
		log.info("\t+ getAuthority: {}", url.getAuthority());
		log.info("\t+ getProtocol: {}", url.getProtocol());
		log.info("\t+ getHost: {}", url.getHost());
		log.info("\t+ getPort: {}", url.getPort());// getPort: -1
		log.info("\t+ getDefaultPort: {}", url.getDefaultPort());
		log.info("\t+ getFile: {}", url.getFile());
		log.info("\t+ getPath: {}", url.getPath());
		log.info("\t+ getQuery: {}", url.getQuery());
		log.info("\t+ getRef: {}", url.getRef());
		log.info("\t+ getUserInfo: {}", url.getUserInfo());
		log.info("\t+ getContent: {}", url.getContent());
		
//		--- URL.getContent() 메소드가 반환한 바이트 기반의 입력스트림을 통해
//			지정된 URL의 응답데이터(정확히는 HTTP response메시지) 읽어서 출력해보자
		@Cleanup InputStream is = (InputStream) url.getContent();
		@Cleanup BufferedReader br = new BufferedReader(new InputStreamReader(is));
		
		String line = null;
		while((line=br.readLine()) !=null){
			System.out.println(line);
		}
		
		
	}//main
}//end class
